<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Onyx - LLMx</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Open Graph / Social Preview -->
  <meta property="og:title" content="Onyx Case Study - LLMx" />
  <meta property="og:url" content="https://llmxai.co/work/onyx/" />
  <meta property="og:image" content="https://llmxai.co/LLMx2.jpg" />
  <meta property="og:type" content="website" />
  <meta property="og:description" content="Onyx: A lightweight browser extension for saving and inserting reusable prompt snippets" />

  <!-- Global favicon (shared) -->
  <link rel="icon" href="/favicon.svg" type="image/svg+xml" />

  <!-- Shared stylesheet -->
  <link rel="stylesheet" href="/style.css" />
  <!-- Page-specific stylesheet -->
  <link rel="stylesheet" href="/work/onyx/style.css" />

  <!-- Force light mode and disable animations -->
  <style>
    .case-page h1, .case-page h2, .case-page h3, .case-page p, .case-page small, .case-page span, .case-page li {
      opacity: 1;
      animation: none;
    }
    .case-page svg path {
      opacity: 1;
      animation: none;
    }
    /* Force light mode background on body */
    body:has(.case-page) {
      background: #FFFFFF;
    }
  </style>
</head>

<body>
  <div class="case-page">
    <!-- Hero Section -->
    <section class="case-hero">
      <header class="case-hero-header">
        <a href="/work/" class="logo-link">
          <svg width="680" height="120" viewBox="0 0 680 120" fill="none" xmlns="http://www.w3.org/2000/svg">
            <g>
              <path d="M585.351 120H522.789L552.458 74.1935L522.144 33.2258H586.157L600.83 56.4516L613.407 33.2258H676.614L648.558 73.5484L680 120H615.342L600.669 93.871L585.351 120Z" fill="white"/>
              <path d="M303.903 120V0H384.685L412.902 53.3871L442.248 0H519.16V120H458.211V60.6452L425.963 120H396.778L364.691 60.6452V120H303.903Z" fill="white"/>
              <path d="M151.951 0H213.223V77.2581H296.424V120H151.951V0Z" fill="white"/>
              <path d="M0 0H61.2718V77.2581H144.473V120H0V0Z" fill="white"/>
            </g>
          </svg>
        </a>
      </header>

      <div class="case-hero-content">
        <h1>Onyx</h1>
        <p class="hero-subtitle">Bridging the gap between prompts and productivity with a local-first browser extension</p>
      </div>
    </section>

    <!-- Hero Image -->
    <div class="case-hero-image">
      <img src="/work/onyx/onyx-screenshot2.png" alt="Onyx browser extension interface" />
    </div>

    <!-- Main Content -->
    <div class="case-content">
      <!-- Visit Section -->
      <section class="case-section-two-col">
        <div class="section-left">
          <span class="section-label">Visit</span>
          <a href="/onyx/" class="section-link">llmxai.co/onyx</a>
        </div>
        <div class="section-right">
          <ul class="deliverables-list">
            <li>Chrome Extension Development</li>
            <li>Local-First Architecture</li>
            <li>UI/UX Design</li>
            <li>Chrome Web Store Publishing</li>
          </ul>
        </div>
      </section>

      <!-- Overview Section -->
      <section class="case-section-two-col">
        <div class="section-left">
          <span class="section-label">Overview</span>
        </div>
        <div class="section-right">
          <p>Onyx is a lightweight browser extension for saving and inserting reusable prompt snippets. It was built with a local-first mindset to eliminate backend complexity and protect user data. The design prioritizes speed and simplicity over feature bloat. It integrates with Chrome's popup interface and handles snippet persistence reliably. The extension is live and usable across websites and text fields.</p>
        </div>
      </section>

      <!-- Value Props Section -->
      <section class="case-section-two-col">
        <div class="section-left">
          <span class="section-label">Value</span>
        </div>
        <div class="section-right">
          <ul class="deliverables-list">
            <li>Quickly save and recall prompt snippets anywhere in the browser</li>
            <li>Minimal UI that stays out of the way</li>
            <li>Works fully offline/local — no cloud storage required</li>
            <li>Fast insert into text fields with a popup and hotkeys</li>
            <li>Simple add/edit/delete snippet management</li>
            <li>Published on Chrome Web Store with low friction install</li>
          </ul>
        </div>
      </section>

      <!-- Outcomes Section -->
      <section class="case-section-two-col">
        <div class="section-left">
          <span class="section-label">Outcomes</span>
        </div>
        <div class="section-right">
          <div class="outcomes-grid">
            <div class="outcome-item">
              <span class="outcome-number">1</span>
              <span class="outcome-label">Successfully published and approved on the Chrome Web Store</span>
            </div>
            <div class="outcome-item">
              <span class="outcome-number">100%</span>
              <span class="outcome-label">Local storage — no server costs, no accounts, no cloud sync complexity</span>
            </div>
          </div>
        </div>
      </section>

      <!-- Takeaways Summary Section -->
      <section class="case-section-two-col">
        <div class="section-left">
          <span class="section-label">3 Big Takeaways</span>
        </div>
        <div class="section-right">
          <div class="takeaways-summary">
            <a href="#takeaway-01" class="takeaway-summary-item">01. Local-first design removes friction</a>
            <a href="#takeaway-02" class="takeaway-summary-item">02. Small, focused UX matters</a>
            <a href="#takeaway-03" class="takeaway-summary-item">03. Respect host-site constraints - design graceful fall-backs</a>
          </div>
        </div>
      </section>

      <!-- Takeaway 01 -->
      <section id="takeaway-01" class="case-section-two-col">
        <div class="section-left">
          <h2 class="takeaway-big-number">01.</h2>
          <p class="takeaway-subtitle">Architecture</p>
        </div>
        <div class="section-right">
          <h3 class="takeaway-detail-title">Local-first design removes friction</h3>
          <p class="takeaway-detail-text">Storing data in browser storage avoids server costs, accounts, and cloud sync complexity.</p>
        </div>
      </section>

      <!-- Takeaway 02 -->
      <section id="takeaway-02" class="case-section-two-col">
        <div class="section-left">
          <h2 class="takeaway-big-number">02.</h2>
          <p class="takeaway-subtitle">User Experience</p>
        </div>
        <div class="section-right">
          <h3 class="takeaway-detail-title">Small, focused UX matters</h3>
          <div class="takeaway-content">
            <h4>Load-time budget: &lt; 50 ms</h4>
            <p>The popup ships as a single, tree-shaken JS bundle (~28 KB gzip). Vite's HTML plugin inlines only what's needed; no framework runtime, no analytics, no fonts. The extension is visible before the browser's paint metrics even register.</p>

            <h4>Zero-click muscle-memory</h4>
            <p>"x / " instantly spawns the picker at the caret—no modal, no mouse travel. Arrow-keys + Enter (or Shift + Enter on Claude) confirm; Esc dismisses. Every action is keyboard-first, aligning with how power-users already write prompts.</p>

            <div class="takeaway-image">
              <img src="/work/onyx/onyx-snippet-picker.png" alt="Onyx snippet picker interface showing real-time search" />
            </div>

            <h4>No accounts, no sync latency</h4>
            <p>Snippets live in chrome.storage.sync. The very first write is synchronous; subsequent reads are in-memory cached. Cold-start to first render: ~4 ms. Nothing touches a server, so the tool works offline and never leaks data.</p>

            <h4>Interface density: one screen, one task</h4>
            <p>The popup shows exactly one thing: your list and a form. Options.html duplicates it for larger edits. No settings, no theme toggles, no hidden tabs—every extra button removed.</p>

            <h4>Recoverable actions by design</h4>
            <p>Edit mode is inline, cancellable, and visually separated with a black "editing" badge. Delete has a hover-only affordance and an "undo" snackbar in the next release. Users never wonder "did I just lose something?"</p>

            <p><strong>Result:</strong> most testers added their first snippet in &lt; 20 s, inserted it in chat in &lt; 10 s, and—crucially—forgot the extension was even running. That invisibility is the metric we optimized for.</p>
          </div>
        </div>
      </section>

      <!-- Takeaway 03 -->
      <section id="takeaway-03" class="case-section-two-col">
        <div class="section-left">
          <h2 class="takeaway-big-number">03.</h2>
          <p class="takeaway-subtitle">Technical Constraints</p>
        </div>
        <div class="section-right">
          <h3 class="takeaway-detail-title">Respect host-site constraints - design graceful fall-backs</h3>
          <div class="takeaway-content">
            <p>We spent a full afternoon trying to make Enter confirm a snippet on Claude.ai, exactly as it does on Gemini and ChatGPT. The steps we tried illustrate why "just intercept the key" is sometimes impossible:</p>

            <table>
              <thead>
                <tr>
                  <th>Attempt</th>
                  <th>Technique</th>
                  <th>Outcome</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Bubble-phase listener</td>
                  <td>document.addEventListener('keydown', …)</td>
                  <td>Fires after Claude's React handler; message already sent.</td>
                </tr>
                <tr>
                  <td>Capture-phase listener</td>
                  <td>Same call with useCapture = true, plus e.stopImmediatePropagation()</td>
                  <td>Claude still sees the event—its input sits in a shadow DOM with its own capture listeners that run first.</td>
                </tr>
                <tr>
                  <td>Shadow-DOM retargeting</td>
                  <td>Attach listener to shadowRoot.host</td>
                  <td>Claude re-creates the host node on every render; listener is lost.</td>
                </tr>
              </tbody>
            </table>

            <h4>Why we stopped pushing</h4>
            <ul>
              <li>Risk: A missed interception fires sendMessage() prematurely—highly visible failure.</li>
              <li>Maintenance cost: Claude's internal markup and event order can change without notice.</li>
              <li>Performance: Re-binding listeners add overhead on every render.</li>
            </ul>

            <h4>Fallback triggers</h4>
            <div class="trigger-item">
              <span class="trigger-key">Shift + Enter</span>
              <p>Ubiquitous "insert newline" shortcut; Claude does not send the message in this branch, so we can safely hijack it.</p>
            </div>
            <div class="trigger-item">
              <span class="trigger-key">Tab</span>
              <p>Natural "cycle/confirm" key for autocomplete lists; never mapped to "Send".</p>
            </div>

            <h4>The final rule set</h4>
            <div class="rule-box">
              <p><strong>If picker open:</strong></p>
              <p>Enter → confirm (except on Claude)</p>
              <p>Shift+Enter → confirm (all sites)</p>
              <p>Tab → confirm (all sites)</p>
              <p><strong>Else:</strong></p>
              <p>Let the page behave normally</p>
            </div>

            <p>By conceding one extra keystroke on a single site, we delivered a solution that is predictable, future-proof, and requires no special permissions or brittle DOM surgery—turning a blocked engineering task into a user-experience refinement.</p>
          </div>
        </div>
      </section>

      <!-- CTA -->
      <section class="case-cta">
        <a href="/onyx/" class="cta-button">Install Onyx &rarr;</a>
      </section>

      <!-- Footer -->
      <footer class="case-footer">
        <a href="/work/">&larr; Back to Work</a>
      </footer>
    </div>
  </div>

  <!-- Scripts -->
  <script src="/scripts.js"></script>
</body>
</html>
